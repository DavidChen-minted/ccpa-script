<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/ccpa-script/_next/static/S3jqTnvR9yNhIFYAtVbtF/pages/_app.js" as="script"/><link rel="preload" href="/ccpa-script/_next/static/S3jqTnvR9yNhIFYAtVbtF/pages/%5Baspect%5D.js" as="script"/><link rel="preload" href="/ccpa-script/_next/static/runtime/webpack-c212667a5f965e81e004.js" as="script"/><link rel="preload" href="/ccpa-script/_next/static/chunks/framework.c8d289f8b96717e32d7a.js" as="script"/><link rel="preload" href="/ccpa-script/_next/static/chunks/9de3dce4f83e76bf1a3b81a049ad6dd6fb11f3ad.a3046e5e30763b9de813.js" as="script"/><link rel="preload" href="/ccpa-script/_next/static/chunks/49a559341b06ea14754950be742c93b3e6f1a749.c45c22d63ff5241eb457.js" as="script"/><link rel="preload" href="/ccpa-script/_next/static/chunks/19d1d465c5fff1e10334a74e6ea4836589157064.69444a05c9a1ec865384.js" as="script"/><link rel="preload" href="/ccpa-script/_next/static/runtime/main-1bb41b07341b01c7c156.js" as="script"/></head><body><div id="__next"><style data-emotion-css="18ylox7">button{border:none;border-radius:0;margin:0;padding:0;width:auto;overflow:visible;background:transparent;}button:focus{outline:none;box-shadow:none;}</style><main><p>{&quot;steps&quot;:[{&quot;id&quot;:&quot;begin&quot;,&quot;begin&quot;:true,&quot;check&quot;:{&quot;dbs&quot;:[{&quot;db&quot;:&quot;drupal&quot;,&quot;sections&quot;:[{&quot;snippets&quot;:[&quot;set_email_var&quot;]}]}]},&quot;delete&quot;:{&quot;dbs&quot;:[{&quot;db&quot;:&quot;drupal&quot;,&quot;sections&quot;:[{&quot;snippets&quot;:[&quot;set_request_number&quot;,&quot;set_user_id&quot;,&quot;compose_email_placeholder&quot;,&quot;compose_text_placeholder&quot;]}]}]}},{&quot;id&quot;:&quot;email&quot;,&quot;check&quot;:{&quot;description&quot;:&quot;check if the email is in users table in bidata DB\n&quot;,&quot;dbs&quot;:[{&quot;db&quot;:&quot;drupal&quot;,&quot;sections&quot;:[{&quot;snippets&quot;:[&quot;find_user_id&quot;,&quot;show_user_id&quot;]}]}]},&quot;delete&quot;:{&quot;description&quot;:&quot;create sql to \&quot;delete\&quot; in users table\n&quot;,&quot;dbs&quot;:[{&quot;db&quot;:&quot;drupal&quot;,&quot;sections&quot;:[{&quot;snippets&quot;:[&quot;update_placeholder_in_users&quot;]}]}]}}],&quot;vars&quot;:[{&quot;id&quot;:&quot;email&quot;,&quot;description&quot;:&quot;email address from OneTrust\n&quot;},{&quot;id&quot;:&quot;requestNumber&quot;,&quot;description&quot;:&quot;request number from OneTrust\n&quot;},{&quot;id&quot;:&quot;userId&quot;,&quot;description&quot;:&quot;user id from the main drupal database\n&quot;},{&quot;id&quot;:&quot;emailPlaceholder&quot;,&quot;description&quot;:&quot;placeholder to replace email reference\n&quot;},{&quot;id&quot;:&quot;textPlaceholder&quot;,&quot;description&quot;:&quot;placeholder to replace text reference\n&quot;}],&quot;db&quot;:[&quot;drupal&quot;,&quot;sessions&quot;,&quot;di&quot;,&quot;jobs&quot;,&quot;di_jobs&quot;],&quot;snippets&quot;:{&quot;set_email_var&quot;:&quot;set @email = {{email}};\n&quot;,&quot;find_user_id&quot;:&quot;select uid into @UID from users where mail = @email;\n&quot;,&quot;show_user_id&quot;:&quot;select @UID;\n&quot;,&quot;set_request_number&quot;:&quot;set @requestnumber = {{requestNumber}};\n&quot;,&quot;set_user_id&quot;:&quot;set @UID = {{userId}};\n&quot;,&quot;compose_email_placeholder&quot;:&quot;select concat(\&quot;deleted-onetrust-req-\&quot;, @requestnumber, \&quot;@privacy.mntd.net\&quot;) into @emailplaceholder;\n&quot;,&quot;compose_text_placeholder&quot;:&quot;select concat(\&quot;Deleted per onetrust\&quot;, @requestnumber) into @textplaceholder;\n&quot;,&quot;update_placeholder_in_users&quot;:&quot;update users\nset\nname = @textplaceholder,\ninit = @textplaceholder,\nmail = @emailplaceholder,\npass = textplaceholder,\nwhere uid = @UID;\n&quot;}}</p></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"initialProps":{"appProps":{}},"initialState":{"scriptSnippet":{"ids":[],"entities":{}}},"__N_SSG":true,"pageProps":{"yamlData":{"steps":[{"id":"begin","begin":true,"check":{"dbs":[{"db":"drupal","sections":[{"snippets":["set_email_var"]}]}]},"delete":{"dbs":[{"db":"drupal","sections":[{"snippets":["set_request_number","set_user_id","compose_email_placeholder","compose_text_placeholder"]}]}]}},{"id":"email","check":{"description":"check if the email is in users table in bidata DB\n","dbs":[{"db":"drupal","sections":[{"snippets":["find_user_id","show_user_id"]}]}]},"delete":{"description":"create sql to \"delete\" in users table\n","dbs":[{"db":"drupal","sections":[{"snippets":["update_placeholder_in_users"]}]}]}}],"vars":[{"id":"email","description":"email address from OneTrust\n"},{"id":"requestNumber","description":"request number from OneTrust\n"},{"id":"userId","description":"user id from the main drupal database\n"},{"id":"emailPlaceholder","description":"placeholder to replace email reference\n"},{"id":"textPlaceholder","description":"placeholder to replace text reference\n"}],"db":["drupal","sessions","di","jobs","di_jobs"],"snippets":{"set_email_var":"set @email = {{email}};\n","find_user_id":"select uid into @UID from users where mail = @email;\n","show_user_id":"select @UID;\n","set_request_number":"set @requestnumber = {{requestNumber}};\n","set_user_id":"set @UID = {{userId}};\n","compose_email_placeholder":"select concat(\"deleted-onetrust-req-\", @requestnumber, \"@privacy.mntd.net\") into @emailplaceholder;\n","compose_text_placeholder":"select concat(\"Deleted per onetrust\", @requestnumber) into @textplaceholder;\n","update_placeholder_in_users":"update users\nset\nname = @textplaceholder,\ninit = @textplaceholder,\nmail = @emailplaceholder,\npass = textplaceholder,\nwhere uid = @UID;\n"}}}},"page":"/[aspect]","query":{"aspect":"growth"},"buildId":"S3jqTnvR9yNhIFYAtVbtF","assetPrefix":"/ccpa-script","runtimeConfig":{},"nextExport":false,"isFallback":false,"gsp":true,"appGip":true}</script><script nomodule="" src="/ccpa-script/_next/static/runtime/polyfills-788a592a52ba46c11fcc.js"></script><script async="" data-next-page="/_app" src="/ccpa-script/_next/static/S3jqTnvR9yNhIFYAtVbtF/pages/_app.js"></script><script async="" data-next-page="/[aspect]" src="/ccpa-script/_next/static/S3jqTnvR9yNhIFYAtVbtF/pages/%5Baspect%5D.js"></script><script src="/ccpa-script/_next/static/runtime/webpack-c212667a5f965e81e004.js" async=""></script><script src="/ccpa-script/_next/static/chunks/framework.c8d289f8b96717e32d7a.js" async=""></script><script src="/ccpa-script/_next/static/chunks/9de3dce4f83e76bf1a3b81a049ad6dd6fb11f3ad.a3046e5e30763b9de813.js" async=""></script><script src="/ccpa-script/_next/static/chunks/49a559341b06ea14754950be742c93b3e6f1a749.c45c22d63ff5241eb457.js" async=""></script><script src="/ccpa-script/_next/static/chunks/19d1d465c5fff1e10334a74e6ea4836589157064.69444a05c9a1ec865384.js" async=""></script><script src="/ccpa-script/_next/static/runtime/main-1bb41b07341b01c7c156.js" async=""></script><script src="/ccpa-script/_next/static/S3jqTnvR9yNhIFYAtVbtF/_buildManifest.js" async=""></script><script src="/ccpa-script/_next/static/S3jqTnvR9yNhIFYAtVbtF/_ssgManifest.js" async=""></script></body></html>
{"version":3,"file":"static/webpack/static/development/pages/index/[id].js.182a69f8dc9c4e23b738.hot-update.js","sources":["webpack:///./src/utils/redux/DynamicStoreWrap.tsx"],"sourcesContent":["import React, { PropsWithChildren, FC, useState, useEffect } from 'react';\nimport { ReactReduxContext } from 'react-redux';\nimport { ReducerEnhancedStore } from './configureStore';\n\nexport type CallbackOnStore = (store: ReducerEnhancedStore) => Promise<void>;\n\ntype DynamicStoreWrapProps = PropsWithChildren<{\n  callbackOnMount?: CallbackOnStore;\n  callbackOnUnmount?: CallbackOnStore;\n}>;\n\ninterface DynamicStoreProps extends DynamicStoreWrapProps {\n  store: ReducerEnhancedStore;\n}\n\nconst DynamicStore: FC<DynamicStoreProps> = ({\n  store,\n  callbackOnMount,\n  callbackOnUnmount,\n  children,\n}) => {\n  const [readyToRender, setReadyToRender] = useState(false);\n\n  useEffect(() => {\n    const asyncInitiate = async () => {\n      if (callbackOnMount) {\n        await callbackOnMount(store);\n      }\n      setReadyToRender(true);\n    };\n\n    const asyncEnd = async () => {\n      setReadyToRender(false);\n      if (callbackOnUnmount) {\n        callbackOnUnmount(store);\n      }\n    };\n\n    asyncInitiate();\n\n    return () => {\n      asyncEnd();\n    };\n  }, []);\n\n  return readyToRender ? <>{children}</> : null;\n};\n\nconst DynamicStoreWrap: FC<DynamicStoreWrapProps> = (props) => (\n  <ReactReduxContext.Consumer>\n    {({ store }: { store: unknown }) => {\n      return (\n        // eslint-disable-next-line react/jsx-props-no-spreading\n        <DynamicStore {...props} store={store as ReducerEnhancedStore} />\n      );\n    }}\n  </ReactReduxContext.Consumer>\n);\n\nexport default DynamicStoreWrap;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAcA;AAKA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAIA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAIA;AAPA;AACA;AAUA;;;;A","sourceRoot":""}
{"initialProps":{"appProps":{}},"initialState":{"scriptSnippet":{"ids":[],"entities":{}},"variable":{"ids":[],"entities":{}},"scriptType":[],"scriptDatabase":[],"choiceControl":{"ids":[],"entities":{}},"step":{"steps":{}}},"__N_SSG":true,"pageProps":{"yamlData":{"steps":[{"id":"begin","visible":false,"check":{"script":{"db":"drupal","snippets":["set_email_var"]}},"delete":{"script":{"db":"drupal","snippets":["set_request_number","set_user_id","compose_email_placeholder","compose_text_placeholder"]}}},{"id":"email","check":{"description":"check if the email is in users table in bidata DB\n","choices":["yes","no"],"script":{"db":"drupal","snippets":["find_user_id","show_user_id"]}},"delete":{"description":"create sql to \"delete\" in users table\n","script":{"db":"drupal","snippets":["update_placeholder_in_users"]}}}],"types":["check","delete"],"db":["drupal","sessions","di","jobs","di_jobs"],"vars":{"email":{"description":"email address from OneTrust\n"},"requestNumber":{"description":"request number from OneTrust\n"},"userId":{"description":"user id from the main drupal database\n"},"emailPlaceholder":{"description":"placeholder to replace email reference\n"},"textPlaceholder":{"description":"placeholder to replace text reference\n"}},"snippets":{"set_email_var":"set @email = {{email}};\n","find_user_id":"select uid into @UID from users where mail = @email;\n","show_user_id":"select @UID;\n","set_request_number":"set @requestnumber = {{requestNumber}};\n","set_user_id":"set @UID = {{userId}};\n","compose_email_placeholder":"select concat(\"deleted-onetrust-req-\", @requestnumber, \"@privacy.mntd.net\") into @emailplaceholder;\n","compose_text_placeholder":"select concat(\"Deleted per onetrust\", @requestnumber) into @textplaceholder;\n","update_placeholder_in_users":"update users\nset\nname = @textplaceholder,\ninit = @textplaceholder,\nmail = @emailplaceholder,\npass = textplaceholder,\nwhere uid = @UID;\n"}},"aspect":"growth"}}